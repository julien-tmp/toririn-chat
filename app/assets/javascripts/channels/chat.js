// App.room = App.cable.subscriptions.create({
//   channel: 'ChatChannel',
//   token: 'VdpzdnBgY2l1NvpmYrgY'
//   }, {
//   connected() {
//     console.log('connected');
//   },
//   disconnected() {
//     console.log('disconnected');
//   },
//   received(data) {
//     console.log('received');
//   },
//   text(text) {
//     return this.perform('text', {
//       room_id: 'VdpzdnBgY2l1NvpmYrgY',
//       text: text
//     });
//   },
// });


// (function() {

//
// }).call(this);


// var room_subscription = {
//   connected: function() {
//     // this.mark('read', getUnreadMessageIDs());
//     // return scrollToBottom();
//   },
//   received: function(data) {
//     // if (data['action'] === 'append') {
//     //   appendMessage(data['message']);
//     //   this.mark('read', getUnreadMessageIDs());
//     //   scrollToBottom();
//     // }
//     // if (data['action'] === 'update') {
//     //   return updateMessage(data['message']);
//     // }
//   },
//   disconnected: function() {
//   },
//   rejected: function() {
//
//   },

//   stamp: function(stamp) {
//     // return this.perform('stamp', {
//     //   room_id: getRoomID(),
//     //   stamp: stamp
//     // });
//   },
//   mark: function(type, message_ids) {
//     // if (message_ids.length > 0) {
//     //   return this.perform('mark', {
//     //     type: type,
//     //     message_ids: message_ids
//     //   });
//     // }
//   }
// };


//
// App.chat = App.cable.subscriptions.create('ChatChannel', {
//   connected() {
//     console.log('connected');
//     let room_identifier = {
//       channel: 'RoomChannel',
//       room_id: getRoomID()
//     };
//   },
//   disconnected() {
//     console.log('disconnected');
//   },
//   received(data) {
//     console.log('received', data);
//   }
// });

// var appendMessage,
//   getRoomID,
//   getUnreadMessageIDs,
//   room_subscription,
//   scrollToBottom,
//   updateMessage,
//   indexOf = [].indexOf || function(item) {
//     for (var i = 0, l = this.length; i < l; i++) {
//       if (i in this && this[i] === item)
//         return i;
//       }
//     return -1;
//   };
//
// getRoomID = function() {
//   return $('#params').data('room-id');
// };
//
// getUnreadMessageIDs = function() {
//   var m,
//     message_ids,
//     user_id;
//   user_id = $('#params').data('user-id');
//   message_ids = (function() {
//     var i,
//       len,
//       ref,
//       results;
//     ref = $('.message');
//     results = [];
//     for (i = 0, len = ref.length; i < len; i++) {
//       m = ref[i];
//       if ((indexOf.call($(m).data('readers'), user_id) < 0)) {
//         results.push($(m).data('id'));
//       }
//     }
//     return results;
//   })();
//   return message_ids;
// };
//
// appendMessage = function(message) {
//   return $('.messages').append(message);
// };
//
// updateMessage = function(message) {
//   var id;
//   id = $(message).data('id');
//   return $(".message[data-id=" + id + "]").html(message);
// };
//
// scrollToBottom = function() {
//   return window.scrollTo(0, document.body.scrollHeight);
// };
//

//
// $(document).on('turbolinks:load', function() {
//   var room_identifier;
//   if (getRoomID() != null) {
//     room_identifier = {
//       channel: 'RoomChannel',
//       room_id: getRoomID()
//     };
//     App.room = App.cable.subscriptions.create(room_identifier, room_subscription);
//   }
//   return scrollToBottom();
// });
//
// $(document).on('turbolinks:request-start', function() {
//   if (getRoomID() != null) {
//     return App.room.unsubscribe();
//   }
// });
//
// // ---
// // generated by coffee-script 1.9.2
